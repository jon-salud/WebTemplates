---
import { ClipboardList, PenTool, Hammer, CheckCircle } from 'lucide-react';

interface Props {
  industry: {
    name: string;
    colors: {
      primary: string;
      accent: string;
    };
  };
  image?: string;
}

const { industry, image } = Astro.props;

const steps = [
  {
    title: 'Free Estimate & Consultation',
    description: 'We meet to discuss your vision, assess the site, and provide a preliminary estimate at no cost.',
    icon: ClipboardList,
  },
  {
    title: 'Detailed Quote & Timeline',
    description: 'You receive a comprehensive proposal outlining materials, costs, and a realistic project schedule.',
    icon: PenTool,
  },
  {
    title: 'Project Execution',
    description: 'Our skilled team gets to work, maintaining a clean job site and keeping you updated every step of the way.',
    icon: Hammer,
  },
  {
    title: 'Final Walkthrough',
    description: 'We review the finished project together to ensure every detail meets your satisfaction before sign-off.',
    icon: CheckCircle,
  },
];

const defaultImage = "https://images.unsplash.com/photo-1503387762-592deb58ef4e?auto=format&fit=crop&w=800&q=80"; // Construction planning
const displayImage = image || defaultImage;
---

<section class="py-20 bg-white" aria-label="Our process">
  <div class="container mx-auto px-6">
    <div class="grid lg:grid-cols-2 gap-16 items-center">
      
      <!-- Left: Content -->
      <div>
        <div class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-neutral-100 text-neutral-600 text-sm font-medium mb-6">
          <span class="w-2 h-2 rounded-full" style={`background-color: ${industry.colors.primary}`}></span>
          How We Work
        </div>
        <h2 class="text-3xl md:text-4xl font-bold text-neutral-900 mb-6">
          From Concept to Completion
        </h2>
        <p class="text-lg text-neutral-600 mb-12">
          We believe in transparency and communication. Our proven process ensures your project runs smoothly from start to finish.
        </p>

        <div class="space-y-8 relative">
          <!-- Vertical Line -->
          <div class="absolute left-6 top-4 bottom-4 w-px bg-neutral-200 hidden md:block"></div>

          {steps.map((step, index) => (
            <div class="relative flex gap-6">
              <!-- Icon Bubble -->
              <div class="relative z-10 flex-shrink-0 w-12 h-12 rounded-full bg-white border-2 flex items-center justify-center shadow-sm" style={`border-color: ${industry.colors.primary}`}>
                <step.icon className="w-5 h-5" style={{ color: industry.colors.primary }} />
              </div>
              
              <!-- Text -->
              <div class="pt-1">
                <h3 class="text-xl font-bold text-neutral-900 mb-2">{step.title}</h3>
                <p class="text-neutral-600 leading-relaxed">{step.description}</p>
              </div>
            </div>
          ))}
        </div>
      </div>

      <!-- Right: Image -->
      <div class="relative h-full min-h-[500px] rounded-3xl overflow-hidden shadow-2xl group">
        <img 
          src={displayImage} 
          alt="Construction process" 
          class="absolute inset-0 w-full h-full object-cover transition-transform duration-700 group-hover:scale-105"
        />
        <div class="absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent"></div>
        
        <div class="absolute bottom-8 left-8 right-8 text-white">
          <div class="flex items-center gap-4 mb-4">
            <div class="flex -space-x-3">
              {[1,2,3].map(i => (
                <div class="w-10 h-10 rounded-full border-2 border-white bg-neutral-200"></div>
              ))}
            </div>
            <div class="text-sm font-medium">
              <p>Trusted by 500+ homeowners</p>
            </div>
          </div>
          <p class="text-white/90 text-sm">"The most organized contractor we've ever worked with."</p>
        </div>
      </div>

    </div>
  </div>
</section>
